# Spring Security ‚Äî REST API —Å JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π

–ü—Ä–æ—Å—Ç–æ–µ REST API –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ Spring Boot 3.2 —Å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏, –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏ –±–∞–∑–æ–≤—ã–º–∏ –º–µ—Ä–∞–º–∏ –∑–∞—â–∏—Ç—ã.

## üìå –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç API –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏, –≤—Ö–æ–¥–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º JWT —Ç–æ–∫–µ–Ω–æ–≤. –í—Å–µ –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏ (H2 –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö), —á—Ç–æ —É–¥–æ–±–Ω–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.

**–û—Å–Ω–æ–≤–Ω–æ–π —Å—Ç–µ–∫:**
- Java 17
- Spring Boot 3.2.1
- Spring Security 6.2.1
- JWT (JJWT)
- H2 Database
- SpringDoc OpenAPI (Swagger UI)
- Lombok

##  API Endpoints

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (`/auth`)

#### 1. **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**
```http
POST /auth/register
Content-Type: application/json

{
  "username": "john_doe",
  "email": "john@example.com",
  "password": "SecurePassword123!"
}
```

**–û—Ç–≤–µ—Ç (200 OK):**
```json
{
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
}
```

#### 2. **–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É**
```http
POST /auth/login
Content-Type: application/json

{
  "username": "john_doe",
  "password": "SecurePassword123!"
}
```

**–û—Ç–≤–µ—Ç (200 OK):**
```json
{
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
}
```

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π API (`/api`)

#### 3. **–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** (—Ç—Ä–µ–±—É–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é)
```http
GET /api/data
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

**–û—Ç–≤–µ—Ç (200 OK):**
```json
[
  {
    "id": 1,
    "username": "john_doe",
    "email": "john@example.com",
    "role": "ROLE_USER"
  }
]
```

### –õ—é–±–∏–º—ã–µ –º–µ—Å—Ç–∞ (`/api/places`)

#### 3. **–ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –ª—é–±–∏–º—ã–µ –º–µ—Å—Ç–∞ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**
```http
GET /api/places
Authorization: Bearer eyJh–±GciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

**–û—Ç–≤–µ—Ç (200 OK):**
```json
[
  {
    "id": 1,
    "placeName": "–ü–∞—Ä–∫ –∫—É–ª—å—Ç—É—Ä—ã",
    "description": "–ö—Ä–∞—Å–∏–≤—ã–π –ø–∞—Ä–∫ –≤ —Ü–µ–Ω—Ç—Ä–µ –≥–æ—Ä–æ–¥–∞"
  },
  {
    "id": 2,
    "placeName": "–ö–∞—Ñ–µ –Ω–∞ –Ω–∞–±–µ—Ä–µ–∂–Ω–æ–π",
    "description": "–£—é—Ç–Ω–æ–µ –∫–∞—Ñ–µ —Å –≤–∏–¥–æ–º –Ω–∞ —Ä–µ–∫—É"
  }
]
```

#### 4. **–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–µ –ª—é–±–∏–º–æ–µ –º–µ—Å—Ç–æ**
```http
POST /api/places
Authorization: Bearer eyJh–±GciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
Content-Type: application/json

{
  "placeName": "–ü–∞—Ä–∫ –∫—É–ª—å—Ç—É—Ä—ã",
  "description": "–ö—Ä–∞—Å–∏–≤—ã–π –ø–∞—Ä–∫ –≤ —Ü–µ–Ω—Ç—Ä–µ –≥–æ—Ä–æ–¥–∞"
}
```

**–û—Ç–≤–µ—Ç (201 Created):**
```json
{
  "id": 1,
  "placeName": "–ü–∞—Ä–∫ –∫—É–ª—å—Ç—É—Ä—ã",
  "description": "–ö—Ä–∞—Å–∏–≤—ã–π –ø–∞—Ä–∫ –≤ —Ü–µ–Ω—Ç—Ä–µ –≥–æ—Ä–æ–¥–∞"
}
```

#### 5. **–û–±–Ω–æ–≤–∏—Ç—å –ª—é–±–∏–º–æ–µ –º–µ—Å—Ç–æ**
```http
PUT /api/places/{placeId}
Authorization: Bearer eyJh–±GciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
Content-Type: application/json

{
  "placeName": "–ü–∞—Ä–∫ –∫—É–ª—å—Ç—É—Ä—ã (–æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ)",
  "description": "–ö—Ä–∞—Å–∏–≤—ã–π –ø–∞—Ä–∫ –≤ —Ü–µ–Ω—Ç—Ä–µ –≥–æ—Ä–æ–¥–∞ —Å –Ω–æ–≤—ã–º –Ω–∞–∑–≤–∞–Ω–∏–µ–º"
}
```

#### 6. **–£–¥–∞–ª–∏—Ç—å –ª—é–±–∏–º–æ–µ –º–µ—Å—Ç–æ**
```http
DELETE /api/places/{placeId}
Authorization: Bearer eyJh–±GciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (`/api/users`)

#### 7. **–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**
```http
GET /api/users
Authorization: Bearer eyJh–±GciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

#### 8. **–ü–æ–ª—É—á–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**
```http
GET /api/users/profile
Authorization: Bearer eyJh–±GciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

**–û—Ç–≤–µ—Ç (200 OK):**
```json
{
  "id": 1,
  "username": "john_doe",
  "email": "john@example.com"
}
```

---

## üõ°Ô∏è –ú–µ—Ä—ã –∑–∞—â–∏—Ç—ã

### 1. **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ JWT**

JWT (JSON Web Token) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –±–µ–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–µ—Å—Å–∏–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.

- **–ì–¥–µ**: `JwtService.java`
- **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç**:
  - –ü—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏/–≤—Ö–æ–¥–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω
  - –¢–æ–∫–µ–Ω —Å–æ–¥–µ—Ä–∂–∏—Ç: username, id, email, —Ä–æ–ª—å –∏ –≤—Ä–µ–º—è –∏—Å—Ç–µ—á–µ–Ω–∏—è
  - –ö–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å –∫ –∑–∞—â–∏—â—ë–Ω–Ω—ã–º —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞–º –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ç–æ–∫–µ–Ω –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ `Authorization: Bearer <token>`
  - –¢–æ–∫–µ–Ω –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å –∏ —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –∑–∞–ø—Ä–æ—Å–æ–º
- **–ö–ª—é—á –ø–æ–¥–ø–∏—Å–∏**: —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ `application.yaml` –∫–∞–∫ `token.signing.key` (BASE64-–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π)

### 2. **–•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π (BCrypt)**

–ü–∞—Ä–æ–ª–∏ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ.

- **–ì–¥–µ**: `SecurityConfiguration.java` ‚Üí `BCryptPasswordEncoder`
- **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç**:
  - –ü—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–∞—Ä–æ–ª—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ö–µ—à–∏—Ä—É–µ—Ç—Å—è BCrypt
  - –ü—Ä–∏ –≤—Ö–æ–¥–µ –≤–≤–µ–¥—ë–Ω–Ω—ã–π –ø–∞—Ä–æ–ª—å —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç—Å—è —Å —Ö–µ—à–µ–º, –∞ –Ω–µ —Å –æ—Ç–∫—Ä—ã—Ç—ã–º –ø–∞—Ä–æ–ª–µ–º
  - BCrypt –¥–æ–±–∞–≤–ª—è–µ—Ç "—Å–æ–ª—å" –∏ –∑–∞–º–µ–¥–ª–µ–Ω–Ω–æ–µ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ, —á—Ç–æ –¥–µ–ª–∞–µ—Ç –ø–µ—Ä–µ–±–æ—Ä –Ω–µ–≤–æ–∑–º–æ–∂–Ω—ã–º

```java
PasswordEncoder passwordEncoder = new BCryptPasswordEncoder();
String hashedPassword = passwordEncoder.encode("SecurePassword123!");
// –•–µ—à: $2a$10$... (–Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –±—É–¥–µ—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º –¥–ª—è –æ–¥–Ω–æ–≥–æ –ø–∞—Ä–æ–ª—è)
```

### 3. **–ó–∞—â–∏—Ç–∞ –æ—Ç SQL-injection (SQLi)**

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Spring Data JPA —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–º–∏ –∑–∞–ø—Ä–æ—Å–∞–º–∏.

- **–ì–¥–µ**: `UserRepository.java` (–Ω–∞—Å–ª–µ–¥—É–µ—Ç `JpaRepository`)
- **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç**:
  - –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∫ –ë–î –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —á–µ—Ä–µ–∑ JPA, –∫–æ—Ç–æ—Ä–∞—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã (prepared statements)
  - –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –∫–∞–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –∞ –Ω–µ –∫–æ–Ω–∫–∞—Ç–µ–Ω–∏—Ä—É—é—Ç—Å—è –≤ SQL-—Å—Ç—Ä–æ–∫—É
  - Spring –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —ç–∫—Ä–∞–Ω–∏—Ä—É–µ—Ç —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª—ã

```java
// ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ (JPA –∑–∞—Ä–∞–Ω–µ–µ –ø–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å)
User user = userRepository.findByUsername(username);

// ‚ùå –ù–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ (–µ—Å–ª–∏ –±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏—é)
String query = "SELECT * FROM users WHERE username = '" + username + "'";
```

### 4. **–ó–∞—â–∏—Ç–∞ –æ—Ç XSS (Cross-Site Scripting)**

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —è–≤–ª—è–µ—Ç—Å—è REST API –∏ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç HTML –Ω–∞–ø—Ä—è–º—É—é. –ó–∞—â–∏—Ç–∞ –æ—Ç XSS –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `Content-Security-Policy`.

- **–ì–¥–µ**: –≤—Å–µ –æ—Ç–≤–µ—Ç—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç JSON
- **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç**:
  - –§—Ä–æ–Ω—Ç–µ–Ω–¥ (–µ—Å–ª–∏ –µ—Å—Ç—å) –¥–æ–ª–∂–µ–Ω —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º
  - Spring Security –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ (CSRF –æ—Ç–∫–ª—é—á—ë–Ω –¥–ª—è stateless API)
  - –ï—Å–ª–∏ –±—É–¥—É—Ç HTML-—Å—Ç—Ä–∞–Ω–∏—Ü—ã, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Thymeleaf —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º

### 5. **–ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞ (Authorization)**

–î–æ—Å—Ç—É–ø –∫ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞–º –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

- **–ì–¥–µ**: `SecurityConfiguration.java` –∏ –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è `@PreAuthorize`
- **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç**:
  - –ü—É—Ç—å `/api/**` —Ç—Ä–µ–±—É–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é (–ª—é–±–æ–π –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)
  - –ü—É—Ç—å `/auth/**` –æ—Ç–∫—Ä—ã—Ç –¥–ª—è –≤—Å–µ—Ö (—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –≤—Ö–æ–¥)
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –¥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–µ—Ç–æ–¥–∞ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞
  - –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã `/api/places` –ø—Ä–æ–≤–µ—Ä—è—é—Ç –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö —Ç–µ–∫—É—â–µ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å–µ—Ä–≤–∏—Å–∞

```java
@GetMapping("/places")
@PreAuthorize("isAuthenticated()")
public ResponseEntity<?> getUserFavoritePlaces() {
    // –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Ç–æ–ª—å–∫–æ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    return ResponseEntity.ok(favoritePlaceService.getUserFavoritePlaces(...));
}
```

### 6. **CORS –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**

–ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç, –∫–∞–∫–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –º–æ–≥—É—Ç –¥–µ–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∫ API.

- **–ì–¥–µ**: `SecurityConfiguration.java`
- **–¢–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**: —Ä–∞–∑—Ä–µ—à–µ–Ω—ã –∑–∞–ø—Ä–æ—Å—ã —Å–æ –≤—Å–µ—Ö –¥–æ–º–µ–Ω–æ–≤ (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
- **–î–ª—è production**: –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –¥–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –¥–æ–º–µ–Ω–æ–≤:

```java
corsConfiguration.setAllowedOriginPatterns(List.of("https://yourdomain.com"));
```

### 7. **CSRF –∑–∞—â–∏—Ç–∞**

–û—Ç–∫–ª—é—á–µ–Ω–∞ –¥–ª—è stateless REST API (—Ç–æ–∫–µ–Ω—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤–º–µ—Å—Ç–æ —Å–µ—Å—Å–∏–π).

- **–ì–¥–µ**: `SecurityConfiguration.java` ‚Üí `.csrf(AbstractHttpConfigurer::disable)`
- **–ü–æ—á–µ–º—É**: CSRF –∞—Ç–∞–∫–∏ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã –¥–ª—è form-based –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π. REST API —Å JWT –Ω–µ —É—è–∑–≤–∏–º –¥–ª—è CSRF.

### 8. **Stateless —Å–µ—Å—Å–∏–∏**

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ —Ö—Ä–∞–Ω–∏—Ç —Å–µ—Å—Å–∏–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.

- **–ì–¥–µ**: `SecurityConfiguration.java` ‚Üí `sessionCreationPolicy(STATELESS)`
- **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
  - –ü—Ä–æ—â–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å (–Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ—Ä–≤–µ—Ä–æ–≤ –º–æ–≥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏)
  - –ú–µ–Ω—å—à–µ –ø–∞–º—è—Ç–∏
  - –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ —É–∫—Ä–∞—Å—Ç—å —Å–µ—Å—Å–∏–æ–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

### 9. **–í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö**

–í—Å–µ DTO –∏—Å–ø–æ–ª—å–∑—É—é—Ç Jakarta Validation –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö.

- **–ì–¥–µ**: `SignUpRequest.java`, `SignInRequest.java`, `FavoritePlaceDTO.java` —Å –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è–º–∏ `@NotBlank`, `@Email`, `@Size`
- **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç**:
  ```java
  @NotBlank(message = "Username cannot be blank")
  private String username;
  
  @Email(message = "Email should be valid")
  private String email;
  
  @NotBlank(message = "Place name is required")
  @Size(min = 2, max = 100, message = "Place name must be between 2 and 100 characters")
  private String placeName;
  ```
  - –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–¥ –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –∑–∞–ø—Ä–æ—Å–∞
  - –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –Ω–µ–≤–∞–ª–∏–¥–Ω—ã, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è 400 Bad Request —Å –¥–µ—Ç–∞–ª—è–º–∏ –æ—à–∏–±–∫–∏

### 10. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–ª–∞–¥–µ–ª—å—Ü–∞ —Ä–µ—Å—É—Ä—Å–∞ (Multi-tenant –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)**

–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–∏ "–õ—é–±–∏–º—ã–µ –º–µ—Å—Ç–∞" ‚Äî –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∫ —á—É–∂–∏–º –¥–∞–Ω–Ω—ã–º.

- **–ì–¥–µ**: `FavoritePlaceService.java` –≤–æ –≤—Å–µ—Ö –º–µ—Ç–æ–¥–∞—Ö
- **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç**:
  - –ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –∏–ª–∏ —É–¥–∞–ª–µ–Ω–∏–∏ "–õ—é–±–∏–º–æ–≥–æ –º–µ—Å—Ç–∞" —Å–µ—Ä–≤–∏—Å –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ `userId` —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å —Ç–µ–∫—É—â–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
  - –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ø—ã—Ç–∞–µ—Ç—Å—è –æ–±–Ω–æ–≤–∏—Ç—å/—É–¥–∞–ª–∏—Ç—å —á—É–∂–æ–µ –º–µ—Å—Ç–æ, –æ–Ω –ø–æ–ª—É—á–∏—Ç `403 Forbidden` –∏–ª–∏ `404 Not Found`
  ```java
  public FavoritePlace updateFavoritePlace(Long placeId, FavoritePlaceDTO dto, Long userId) {
      FavoritePlace place = favoritePlaceRepository.findById(placeId)
          .orElseThrow(() -> new RuntimeException("Place not found"));
      
      // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–ª–∞–¥–µ–ª—å—Ü–∞
      if (!place.getUser().getId().equals(userId)) {
          throw new RuntimeException("Access denied");
      }
      // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ...
  }
  ```

---

## üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –õ–æ–∫–∞–ª—å–Ω–æ

```bash
# 1. –ö–ª–æ–Ω–∏—Ä—É–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/lubitelkvokk/IS_SpringSecurity.git
cd IS_SpringSecurity

# 2. –°–æ–±–∏—Ä–∞–µ–º –ø—Ä–æ–µ–∫—Ç
mvn -DskipTests package

# 3. –ó–∞–ø—É—Å–∫–∞–µ–º
java -jar target/SpringSecurity-0.0.1-SNAPSHOT.jar
```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –Ω–∞ `http://localhost:8080`.

### Swagger UI

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É:
```
http://localhost:8080/swagger-ui.html
```

---

## üîç –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API

### –ß–µ—Ä–µ–∑ cURL

```bash
# 1. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
curl -X POST http://localhost:8080/auth/register \
  -H "Content-Type: application/json" \
  -d '{"username":"testuser","email":"test@example.com","password":"Test123!"}'

# 2. –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–æ–∫–µ–Ω –∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º –µ–≥–æ
TOKEN="–≤–∞—à_—Ç–æ–∫–µ–Ω_–∑–¥–µ—Å—å"

# 3. –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (—Ç—Ä–µ–±—É–µ—Ç —Ç–æ–∫–µ–Ω)
curl -X GET http://localhost:8080/api/data \
  -H "Authorization: Bearer $TOKEN"

# 4. –ü–æ–ª—É—á–∏—Ç—å –∞–¥–º–∏–Ω-—Ñ—É–Ω–∫—Ü–∏—é (—Ç—Ä–µ–±—É–µ—Ç —Ä–æ–ª—å ADMIN)
curl -X GET http://localhost:8080/api/admin \
  -H "Authorization: Bearer $TOKEN"
```

### –ß–µ—Ä–µ–∑ Postman

1. –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –≤ Postman
2. –í –≤–∫–ª–∞–¥–∫–µ "Authorization" –≤—ã–±–∏—Ä–∞–µ–º —Ç–∏–ø "Bearer Token"
3. –í—Å—Ç–∞–≤–ª—è–µ–º –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω
4. –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å

---

## üìä CI/CD –∏ Security Scanning

–ü—Ä–æ–µ–∫—Ç –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —Å GitHub Actions –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –Ω–∞ –∫–∞–∂–¥–æ–º push –∏ pull request:

### –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è:

1. **SpotBugs** ‚Äî —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ Java –∫–æ–¥–∞ –¥–ª—è –≤—ã—è–≤–ª–µ–Ω–∏—è –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –±–∞–≥–æ–≤ –∏ –ø—Ä–æ–±–ª–µ–º –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
   - –ü–ª–∞–≥–∏–Ω: `spotbugs-maven-plugin` v4.9.8.0
   - –í–∫–ª—é—á–∞–µ—Ç `FindSecBugs` –¥–ª—è —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

2. **OWASP Dependency-Check** ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –Ω–∞ –∏–∑–≤–µ—Å—Ç–Ω—ã–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏ (CVE)
   - –ü–ª–∞–≥–∏–Ω: `dependency-check-maven` v11.1.1
   - –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —Å National Vulnerability Database (NVD)
   - API –∫–ª—é—á —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ GitHub Secrets –¥–ª—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã

3. **Dependabot** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
   - –ö–æ–Ω—Ñ–∏–≥: `.github/dependabot.yml`
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—ë—Ç pull requests —Å –Ω–æ–≤—ã–º–∏ –≤–µ—Ä—Å–∏—è–º–∏

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏:

–°–ª–µ–¥—É—é—â–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã –¥–æ –±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö –≤–µ—Ä—Å–∏–π:

| –£—è–∑–≤–∏–º–æ—Å—Ç—å | –°—Ç–∞—Ä–∞ –≤–µ—Ä—Å–∏—è | –ù–æ–≤–∞—è –≤–µ—Ä—Å–∏—è | –¢–∏–ø | CVSS |
|---|---|---|---|---|
| CVE-2024-22233 (Spring Core) | 6.1.2 | 6.1.18 | RCE | 7.5 |
| CVE-2024-22259 (Spring Core) | 6.1.2 | 6.1.18 | ReDoS | 8.1 |
| CVE-2024-22234 (Spring Security) | 6.2.1 | 6.2.11 | AuthBypass | 7.4 |
| CVE-2024-56337 (Tomcat) | 10.1.17 | 10.1.34 | BufferOverflow | 9.1 |
| CVE-2025-48924 (Commons-Lang3) | 3.13.0 | 3.20.0 | DoS | 7.5 |
| CVE-2023-35116 (Jackson-databind) | 2.15.3 | 2.17.2 | Deserialization | Varies |

–ü—Ä–∏ –∫–∞–∂–¥–æ–º push –∏–ª–∏ pull request –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –≤—Å–µ —Ç—Ä–∏ —Å–∫–∞–Ω–µ—Ä–∞. –û—Ç—á—ë—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã –≤ —Ä–∞–∑–¥–µ–ª–µ GitHub Actions.

---

## üìù –ó–∞–º–µ—Ç–∫–∏ –∏ —É–ª—É—á—à–µ–Ω–∏—è

- H2 –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Ö—Ä–∞–Ω–∏—Ç –¥–∞–Ω–Ω—ã–µ –≤ –ø–∞–º—è—Ç–∏. –î–ª—è production –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ PostgreSQL –∏–ª–∏ MySQL.
- –ö–ª—é—á –ø–æ–¥–ø–∏—Å–∏ JWT –≤ production –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è, –∞ –Ω–µ –≤ —Ñ–∞–π–ª–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.
- –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ —Ç–æ–∫–µ–Ω–∞ –≤ –∫–æ–¥–µ hardcoded (100000 –º–∏–Ω—É—Ç). –í production —Å–¥–µ–ª–∞–π—Ç–µ —ç—Ç–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º–æ.
- –î–ª—è production –≤–∫–ª—é—á–∏—Ç–µ HTTPS –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –±–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–∏–µ –ø—Ä–∞–≤–∏–ª–∞ CORS.

---

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License

